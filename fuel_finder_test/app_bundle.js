(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97815,e=>{"use strict";e.s(["AuthProvider",()=>r,"default",()=>s,"useAuth",()=>n]);var o=e.i(43476),t=e.i(71645);let i=(0,t.createContext)(void 0),n=()=>{let e=(0,t.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},r=e=>{let{children:n}=e,[r,s]=(0,t.useState)(null),[a,l]=(0,t.useState)(!1),[c,_]=(0,t.useState)(!0),u=async()=>{try{_(!0);let e=await fetch("/internal-api/session",{credentials:"include"});if(e.ok){let o=await e.json();o.authenticated&&o.user?(s(o.user),l(!0),console.log("[AuthProvider] ✅ User authenticated:",{userId:o.user.userId,role:o.user.role,mftId:o.user.mftId})):(s(null),l(!1))}else console.log("[AuthProvider] ❌ No valid session"),s(null),l(!1)}catch(e){console.error("[AuthProvider] Error initializing auth:",e),s(null),l(!1)}finally{_(!1)}},d=()=>{u()};return(0,t.useEffect)(()=>{u()},[]),(0,t.useEffect)(()=>{let e=e=>{("x-session-id"===e.key||"user_id"===e.key)&&(console.log("[AuthProvider] Auth data changed in another tab, refreshing"),d())};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,o.jsx)(i.Provider,{value:{user:r,isAuthenticated:a,isLoading:c,login:e=>{try{let o={xSessionId:e.xSessionId,userId:e.userId||null,mftId:e.mftId||null,role:e.role||null,email:e.email||null};s(o),l(!0),console.log("[AuthProvider] User logged in successfully:",{userId:e.userId,role:e.role})}catch(e){console.error("[AuthProvider] Error during login:",e)}},logout:()=>{try{if(console.log("[AuthProvider] Logging out user..."),s(null),l(!1),"undefined"!=typeof document){let e="expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain="+window.location.hostname;document.cookie="x-session-id=; ".concat(e),document.cookie="x-user-id=; ".concat(e),document.cookie="x-role-id=; ".concat(e),document.cookie="x-mft-id=; ".concat(e)}window.location.replace("/")}catch(e){console.error("[AuthProvider] Error during logout:",e)}},refreshAuth:d,checkAuth:()=>a&&null!==r,hasRole:e=>(null==r?void 0:r.role)===e,hasAnyRole:e=>null!=r&&!!r.role&&e.includes(r.role)},children:n})},s=r},41639,e=>{"use strict";e.s(["OrganisationProvider",()=>l,"default",()=>c,"useOrganisation",()=>a]);var o=e.i(43476),t=e.i(71645),i=e.i(4427),n=e.i(17337),r=e.i(76659);let s=(0,t.createContext)(void 0),a=()=>{let e=(0,t.useContext)(s);if(void 0===e)throw Error("useOrganisation must be used within an OrganisationProvider");return e},l=e=>{let{children:a}=e,[l,c]=(0,t.useState)(null),[_,u]=(0,t.useState)(!1),[d,T]=(0,t.useState)(null),A=async(e,o)=>{try{u(!0),T(null);let t=e||(e=>{if("undefined"==typeof document)return null;let o="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===o.length){var t;return(null==(t=o.pop())?void 0:t.split(";").shift())||null}return null})("x-user-id"),s=o||r.safeLocalStorage.getItem(n.STORAGE_KEYS.MFT_ID);if(!t)throw Error("User ID is required to fetch organisation details");if(!s)throw Error("MFT ID is required to fetch organisation details");let a=await (0,i.getRequest)("".concat(n.API_ENDPOINTS.MFRS_GET_DETAILS,"?mft_id=").concat(encodeURIComponent(s),"&user_id=").concat(t));if(a.success&&a.data){let e=a.data,o={organisation_name:e.organisation_name,organisation_id:e.organisation_id,mft_id:e.mft_id||s,company_number:e.company_number,address_line_1:e.address_line_1,address_line_2:e.address_line_2,city:e.city,post_code:e.post_code,country:e.country,status:e.status,...e};c(o),o.organisation_name&&r.safeLocalStorage.setItem(n.STORAGE_KEYS.ORG_NAME,o.organisation_name)}else{let e=a.error||"Failed to fetch organisation details";T(e)}}catch(e){T(e instanceof Error?e.message:"An unexpected error occurred"),console.error(" Exception while fetching organisation details:",e)}finally{u(!1)}},h=async()=>{await A()};return(0,t.useEffect)(()=>{(async()=>{let e=(e=>{if("undefined"==typeof document)return null;let o="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===o.length){var t;return(null==(t=o.pop())?void 0:t.split(";").shift())||null}return null})("x-user-id"),o=r.safeLocalStorage.getItem(n.STORAGE_KEYS.MFT_ID);e&&o&&await A(e,o)})()},[]),(0,t.useEffect)(()=>{let e=e=>{e.key===n.STORAGE_KEYS.MFT_ID&&h()};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,o.jsx)(s.Provider,{value:{organisation:l,isLoading:_,error:d,refetchOrganisation:h,setOrganisation:e=>{c(e),(null==e?void 0:e.organisation_name)?r.safeLocalStorage.setItem(n.STORAGE_KEYS.ORG_NAME,e.organisation_name):r.safeLocalStorage.removeItem(n.STORAGE_KEYS.ORG_NAME)},clearOrganisation:()=>{c(null),T(null),r.safeLocalStorage.removeItem(n.STORAGE_KEYS.ORG_NAME)}},children:a})},c=l},23751,56161,e=>{"use strict";e.s(["default",()=>a],23751);var o=e.i(43476);e.s(["ROLE_GROUPS",()=>i,"USER_ROLES",()=>t],56161);let t={MFT_ADMIN:"mft_admin",ADDITIONAL_MFT_ADMIN:"additional_mft_admin",MFT_POINT_OF_CONTACT:"mft_point_of_contact",PFS_FIRST_POINT_OF_CONTACT:"pfs_first_point_of_contact",PFS_ALTERNATIVE_POINT_OF_CONTACT:"pfs_alternate_point_of_contact",PFS_ADDITIONAL_USER:"pfs_additional_user"},i={ADMINS:[t.MFT_ADMIN,t.ADDITIONAL_MFT_ADMIN],MFT_MANAGERS:[t.MFT_ADMIN,t.ADDITIONAL_MFT_ADMIN,t.MFT_POINT_OF_CONTACT],PFS_MANAGERS:[t.PFS_FIRST_POINT_OF_CONTACT,t.PFS_ALTERNATIVE_POINT_OF_CONTACT],PFS_USERS:[t.PFS_FIRST_POINT_OF_CONTACT,t.PFS_ALTERNATIVE_POINT_OF_CONTACT,t.PFS_ADDITIONAL_USER],PRICE_SUBMITTERS:[t.MFT_POINT_OF_CONTACT,t.PFS_FIRST_POINT_OF_CONTACT,t.PFS_ALTERNATIVE_POINT_OF_CONTACT,t.PFS_ADDITIONAL_USER]},n={MANAGE_ADMINS:"manage_admins",MANAGE_MFT_POC:"manage_mft_poc",MANAGE_FORECOURT_USERS:"manage_forecourt_users",REGISTER_FORECOURT:"register_forecourt",UPDATE_ANY_FORECOURT:"update_any_forecourt",UPDATE_OWN_FORECOURT:"update_own_forecourt",ADD_FPOC:"add_fpoc",ADD_ALTERNATE_POC:"add_alternate_poc",ADD_ADDITIONAL_USER:"add_additional_user",SUBMIT_PRICES:"submit_prices",SUBMIT_PRICES_ANY_FORECOURT:"submit_prices_any_forecourt",SUBMIT_PRICES_OWN_FORECOURT:"submit_prices_own_forecourt"};t.MFT_ADMIN,n.MANAGE_ADMINS,n.MANAGE_MFT_POC,n.MANAGE_FORECOURT_USERS,n.REGISTER_FORECOURT,n.UPDATE_ANY_FORECOURT,n.ADD_FPOC,n.ADD_ALTERNATE_POC,n.ADD_ADDITIONAL_USER,n.SUBMIT_PRICES_ANY_FORECOURT,t.ADDITIONAL_MFT_ADMIN,n.MANAGE_ADMINS,n.MANAGE_MFT_POC,n.MANAGE_FORECOURT_USERS,n.REGISTER_FORECOURT,n.UPDATE_ANY_FORECOURT,n.ADD_FPOC,n.ADD_ALTERNATE_POC,n.ADD_ADDITIONAL_USER,n.SUBMIT_PRICES_ANY_FORECOURT,t.MFT_POINT_OF_CONTACT,n.MANAGE_FORECOURT_USERS,n.REGISTER_FORECOURT,n.UPDATE_ANY_FORECOURT,n.ADD_FPOC,n.ADD_ALTERNATE_POC,n.ADD_ADDITIONAL_USER,n.SUBMIT_PRICES,n.SUBMIT_PRICES_ANY_FORECOURT,t.PFS_FIRST_POINT_OF_CONTACT,n.UPDATE_OWN_FORECOURT,n.ADD_ALTERNATE_POC,n.ADD_ADDITIONAL_USER,n.SUBMIT_PRICES,n.SUBMIT_PRICES_OWN_FORECOURT,t.PFS_ALTERNATIVE_POINT_OF_CONTACT,n.UPDATE_OWN_FORECOURT,n.ADD_ADDITIONAL_USER,n.SUBMIT_PRICES,n.SUBMIT_PRICES_OWN_FORECOURT,t.PFS_ADDITIONAL_USER,n.SUBMIT_PRICES,n.SUBMIT_PRICES_OWN_FORECOURT;let r={"button:add-admin":[...i.ADMINS],"button:add-additional-admin":[...i.ADMINS],"button:add-mft-poc":[...i.ADMINS],"button:invite-admin":[...i.ADMINS],"button:register-forecourt":[...i.MFT_MANAGERS],"button:add-new-forecourt":[...i.MFT_MANAGERS],"button:edit-forecourt":[],"button:delete-forecourt":[...i.ADMINS],"button:add-fpoc":[...i.MFT_MANAGERS],"button:add-alternate-poc":[...i.MFT_MANAGERS,t.PFS_FIRST_POINT_OF_CONTACT],"button:add-additional-user":[...i.MFT_MANAGERS,t.PFS_FIRST_POINT_OF_CONTACT,t.PFS_ALTERNATIVE_POINT_OF_CONTACT],"button:delete-additional-user":[...i.MFT_MANAGERS,t.PFS_FIRST_POINT_OF_CONTACT,t.PFS_ALTERNATIVE_POINT_OF_CONTACT],"button:update-prices":[...i.PRICE_SUBMITTERS],"button:bulk-price-upload":[...i.MFT_MANAGERS],"button:submit-prices":[...i.PRICE_SUBMITTERS],"section:admin-panel":[...i.ADMINS],"section:admin-tools":[...i.ADMINS],"section:bulk-upload":[...i.ADMINS],"section:user-management":[...i.MFT_MANAGERS],"section:forecourt-management":[...i.MFT_MANAGERS],"section:reports":[...i.ADMINS],"section:export-data":[...i.ADMINS]};var s=e.i(97815);let a=function(e){let{roles:t,permission:i,children:n,fallback:a=null,hideOnDenied:l=!1}=e,{user:c,isAuthenticated:_,isLoading:u}=(0,s.useAuth)();if(u)return null;if(!_||!c||!c.role)return l?null:(0,o.jsx)(o.Fragment,{children:a});return(i?function(e,o){let t=r[o];return t?t.includes(e):(console.warn("[UI Permissions] No permission defined for: ".concat(o)),!1)}(c.role,i):!t||!(t.length>0)||t.includes(c.role))?(0,o.jsx)(o.Fragment,{children:n}):l?null:(0,o.jsx)(o.Fragment,{children:a})}},28129,e=>{"use strict";e.s(["default",()=>n]);var o=e.i(43476),t=e.i(22016);e.i(85269);var i=e.i(22831);function n(){let{t:e}=(0,i.useTranslation)("footer");return(0,o.jsx)("footer",{className:"govuk-footer",children:(0,o.jsx)("div",{className:"govuk-width-container",children:(0,o.jsxs)("div",{className:"govuk-footer__meta",children:[(0,o.jsxs)("div",{className:"govuk-footer__meta-item govuk-footer__meta-item--grow",children:[(0,o.jsx)("h2",{className:"govuk-visually-hidden",children:e("supportLinks.title")}),(0,o.jsxs)("ul",{className:"govuk-footer__inline-list",children:[(0,o.jsx)("li",{className:"govuk-footer__inline-list-item",children:(0,o.jsx)(t.default,{className:"govuk-footer__link",href:"/privacy",children:e("supportLinks.privacy")})}),(0,o.jsx)("li",{className:"govuk-footer__inline-list-item",children:(0,o.jsx)(t.default,{className:"govuk-footer__link",href:"/accessibility-statement",children:e("supportLinks.accessibility")})})]}),(0,o.jsx)("svg",{"aria-hidden":"true",focusable:"false",className:"govuk-footer__licence-logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 483.2 195.7",height:"17",width:"41",children:(0,o.jsx)("path",{fill:"currentColor",d:"M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"})}),(0,o.jsxs)("p",{className:"govuk-footer__licence-description",children:[e("licence.text")," ",(0,o.jsx)(t.default,{className:"govuk-footer__link",href:e("licence.licenceUrl"),rel:"license",children:e("licence.linkText")}),e("licence.suffix")]})]}),(0,o.jsx)("div",{className:"govuk-footer__meta-item",children:(0,o.jsx)(t.default,{className:"govuk-footer__link govuk-footer__copyright-logo",href:e("copyright.url"),children:e("copyright.text")})})]})})})}},48944,e=>{"use strict";e.s(["default",()=>t]);var o=e.i(43476);function t(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("a",{href:"#main-content",className:"govuk-skip-link",children:"Skip to main content"}),(0,o.jsx)("header",{className:"govuk-header",role:"banner","data-module":"govuk-header",children:(0,o.jsxs)("div",{className:"govuk-header__container govuk-width-container",children:[(0,o.jsx)("div",{className:"govuk-header__logo",children:(0,o.jsx)("a",{href:"/",className:"govuk-header__link govuk-header__link--homepage",children:(0,o.jsx)("span",{className:"govuk-header__logotype",children:(0,o.jsx)("span",{className:"govuk-header__logotype-text",children:"GOV.UK"})})})}),(0,o.jsx)("div",{className:"govuk-header__content",children:(0,o.jsx)("a",{href:"/",className:"govuk-header__link govuk-header__service-name",children:"Fuel Finder"})})]})}),(0,o.jsx)("div",{className:"govuk-width-container",children:(0,o.jsx)("main",{className:"govuk-main-wrapper govuk-main-wrapper--l",id:"main-content",role:"main",children:(0,o.jsx)("div",{className:"govuk-grid-row",children:(0,o.jsxs)("div",{className:"govuk-grid-column-two-thirds",children:[(0,o.jsx)("h1",{className:"govuk-heading-l",children:"Sorry, the service is unavailable"}),(0,o.jsx)("p",{className:"govuk-body",children:"We're making some improvements to Fuel Finder to give you a smoother, more reliable experience."}),(0,o.jsx)("p",{className:"govuk-body",children:"The service is temporarily unavailable while we work behind the scenes. You will be able to use Fuel Finder again once this maintenance is complete."}),(0,o.jsx)("p",{className:"govuk-body",children:"You do not need to do anything now. Please try again later to search for fuel prices and forecourts as usual."}),(0,o.jsx)("hr",{className:"govuk-section-break govuk-section-break--l govuk-section-break--visible"}),(0,o.jsx)("h2",{className:"govuk-heading-m",children:"If you need help"}),(0,o.jsx)("p",{className:"govuk-body",children:"If you have questions about Fuel Finder or need support while the service is unavailable, contact the Fuel Finder team."}),(0,o.jsxs)("p",{className:"govuk-body",children:["Email:"," ",(0,o.jsx)("a",{className:"govuk-link",href:"mailto:fuel-finder-support@example.gov.uk",children:"fuel-finder-support@example.gov.uk"})]}),(0,o.jsx)("p",{className:"govuk-body",children:"Phone: 0300 000 0000 (Monday to Friday, 9am to 5pm)"}),(0,o.jsxs)("p",{className:"govuk-body",children:["You can also visit"," ",(0,o.jsx)("a",{className:"govuk-link",href:"https://www.gov.uk",children:"GOV.UK"})," ","to find other government services."]})]})})})}),(0,o.jsx)("footer",{className:"govuk-footer",role:"contentinfo",children:(0,o.jsx)("div",{className:"govuk-width-container",children:(0,o.jsxs)("div",{className:"govuk-footer__meta",children:[(0,o.jsxs)("div",{className:"govuk-footer__meta-item govuk-footer__meta-item--grow",children:[(0,o.jsx)("h2",{className:"govuk-visually-hidden",children:"Support links"}),(0,o.jsxs)("ul",{className:"govuk-footer__inline-list",children:[(0,o.jsx)("li",{className:"govuk-footer__inline-list-item",children:(0,o.jsx)("a",{className:"govuk-footer__link",href:"/cookies",children:"Cookies"})}),(0,o.jsx)("li",{className:"govuk-footer__inline-list-item",children:(0,o.jsx)("a",{className:"govuk-footer__link",href:"/privacy",children:"Privacy"})}),(0,o.jsx)("li",{className:"govuk-footer__inline-list-item",children:(0,o.jsx)("a",{className:"govuk-footer__link",href:"/contact-us",children:"Contact"})})]}),(0,o.jsxs)("span",{className:"govuk-footer__licence-description",children:["All content is available under the"," ",(0,o.jsx)("a",{className:"govuk-footer__link",href:"https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",rel:"license",children:"Open Government Licence v3.0"}),", except where otherwise stated"]})]}),(0,o.jsx)("div",{className:"govuk-footer__meta-item",children:(0,o.jsx)("a",{className:"govuk-footer__link govuk-footer__copyright-logo",href:"https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/",children:"© Crown copyright"})})]})})}),(0,o.jsx)("script",{src:"https://cdn.jsdelivr.net/npm/govuk-frontend@5.11.1/dist/govuk-frontend.min.js"})]})}}]);